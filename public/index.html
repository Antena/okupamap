<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Okupamap</title>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    <link rel="stylesheet" href="/assets/css/style.css"/>
    <script>


        function initialize() {
            // Map
            var mapCenter = new google.maps.LatLng(-34.773204,-58.348633);
            var mapOptions = {
                zoom: 9,
                center: mapCenter,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }
            var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

            // TOMAS: Fusion Tables layer
            var layer = new google.maps.FusionTablesLayer({
                query: {
                    select: 'Lugar',
                    from: '10KmKBbWAifWCsvTZ2HaYMOwGqi7dNgN-HhKkS-k'
                },
                map: map,
                styles: [{
                    where: "tipo = 'TOMA'",
                    markerOptions: {
                        iconName: "large_red"
                    }
                },{
                    where: "tipo = 'ACCION'",
                    markerOptions: {
                        iconName: "large_green",
                        opacity: 0
                    }
                }
                ]
            });

            $("#controls input").click(function() {


                var inArray = [];
                $("#controls input:checked").each(function(index, elem) {
                            inArray.push($(elem).attr("data-type"));
                        }
                );
                var ins = inArray.length == 0 ? "'FRUTA'" : inArray.join(", ");
                var whereClause = "tipo IN (" + ins + ")";
                layer.setOptions({
                    query: {
                        select: 'Lugar',
                        from: '10KmKBbWAifWCsvTZ2HaYMOwGqi7dNgN-HhKkS-k',
                        where: whereClause
                    }
                })
            })
        }
    </script>
</head>
<body onload="initialize()">
<div id="controls">
    <input type="checkbox" id="toma" checked data-type="'TOMA'" /> Toma
    <input type="checkbox" id="action" checked data-type="'ACCION'" /> Acci√≥n

</div>
<div id="map_canvas"></div>
</body>
</html>